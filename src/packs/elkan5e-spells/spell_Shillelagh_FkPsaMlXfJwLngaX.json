{
    "name": "Shillelagh",
    "type": "spell",
    "img": "icons/weapons/staves/staff-vines-green.webp",
    "effects": [
        {
            "name": "Shillelagh",
            "flags": {
                "dnd5e": {
                    "enchantment": {
                        "level": {
                            "min": null,
                            "max": null
                        },
                        "riders": {
                            "effect": [],
                            "item": []
                        }
                    }
                },
                "dae": {
                    "disableIncapacitated": false,
                    "selfTarget": false,
                    "selfTargetAlways": false,
                    "dontApply": false,
                    "stackable": "noneName",
                    "showIcon": false,
                    "durationExpression": "",
                    "macroRepeat": "none",
                    "specialDuration": []
                },
                "ActiveAuras": {
                    "isAura": false,
                    "aura": "None",
                    "nameOverride": "",
                    "radius": "",
                    "alignment": "",
                    "type": "",
                    "customCheck": "",
                    "ignoreSelf": false,
                    "height": false,
                    "hidden": false,
                    "displayTemp": false,
                    "hostile": false,
                    "onlyOnce": false,
                    "wallsBlock": "system"
                }
            },
            "img": "icons/weapons/staves/staff-vines-green.webp",
            "_id": "WAz2KeNm0Do9ykPj",
            "type": "enchantment",
            "system": {},
            "changes": [
                {
                    "key": "name",
                    "mode": 5,
                    "value": "Shillelagh, {}",
                    "priority": null
                },
                {
                    "key": "system.properties",
                    "mode": 2,
                    "value": "mgc",
                    "priority": null
                },
                {
                    "key": "system.ability",
                    "mode": 5,
                    "value": "wis",
                    "priority": null
                },
                {
                    "key": "system.damage.base.number",
                    "mode": 5,
                    "value": "1",
                    "priority": null
                },
                {
                    "key": "system.damage.base.denomination",
                    "mode": 5,
                    "value": "8",
                    "priority": null
                },
                {
                    "key": "system.damage.base.types",
                    "mode": 5,
                    "value": "[\"bludgeoning\"]",
                    "priority": null
                },
                {
                    "key": "system.damage.versatile.number",
                    "mode": 5,
                    "value": "1",
                    "priority": null
                },
                {
                    "key": "system.damage.versatile.denomination",
                    "mode": 5,
                    "value": "10",
                    "priority": null
                },
                {
                    "key": "system.damage.versatile.types",
                    "mode": 5,
                    "value": "[\"bludgeoning\"]",
                    "priority": null
                }
            ],
            "disabled": false,
            "duration": {
                "startTime": null,
                "seconds": 60,
                "combat": null,
                "rounds": null,
                "turns": null,
                "startRound": null,
                "startTurn": null
            },
            "description": "",
            "origin": null,
            "tint": "#ffffff",
            "transfer": false,
            "statuses": [],
            "sort": 0,
            "_stats": {
                "compendiumSource": null,
                "duplicateSource": null,
                "coreVersion": "12.331",
                "systemId": "dnd5e",
                "systemVersion": "4.0.2",
                "createdTime": null,
                "modifiedTime": 1727722273150,
                "lastModifiedBy": "YxlXl9sauSuWxHdZ"
            },
            "_key": "!items.effects!FkPsaMlXfJwLngaX.WAz2KeNm0Do9ykPj"
        }
    ],
    "folder": "SjVk5lAwzIpqSBbH",
    "flags": {
        "dynamiceffects": {
            "equipActive": false,
            "alwaysActive": false,
            "effects": [
                {
                    "modSpecKey": "macro.execute",
                    "value": "Shillelagh @target",
                    "mode": "+",
                    "targetSpecific": false,
                    "id": 1,
                    "itemId": "HgYH1Eb3LQ19tsjJ",
                    "active": true,
                    "_targets": [],
                    "label": "Macro Execute"
                }
            ]
        },
        "itemacro": {
            "macro": {
                "_data": {
                    "name": "Shillelagh",
                    "type": "script",
                    "scope": "global",
                    "command": "const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\n\nlet weapons = tactor.items.filter(i => i.data.type === `weapon`);\nlet weapon_content = ``;\n\nfor (let weapon of weapons) {\n    weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n}\nif (args[0] === \"on\") {\n    let content = `\n<div class=\"form-group\">\n  <label>Weapons : </label>\n  <select name=\"weapons\">\n    ${weapon_content}\n  </select>\n</div>`;\n\n    new Dialog({\n        title: \"Choose a club or quarterstaff\",\n        content,\n        buttons:\n        {\n            Ok:\n            {\n                label: `Ok`,\n                callback: (html) => {\n                    let itemId = html.find('[name=weapons]')[0].value;\n                    let weaponItem = tactor.items.get(itemId);\n                    let copy_item = duplicate(weaponItem);\n                    DAE.setFlag(tactor, `shillelagh`, {\n                        id : itemId,\n                        damage : copy_item.data.damage.parts[0][0]    \n                    });\n                    let damage = copy_item.data.damage.parts[0][0];\n                    var newdamage = damage.replace(/1d(4|6)/g,\"1d8\");\n                    copy_item.data.damage.parts[0][0] = newdamage;\n                    copy_item.data.ability = \"wis\";\n                    tactor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\n                    ChatMessage.create({content: copy_item.name + \" is empowered\"});\n                }\n            },\n            Cancel:\n            {\n                label: `Cancel`\n            }\n        }\n    }).render(true);\n}\n\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, `shillelagh`);\n    let weaponItem = tactor.items.get(flag.id);\n    let copy_item = duplicate(weaponItem);\n    copy_item.data.damage.parts[0][0] = flag.damage;\n    copy_item.data.ability = \"\";\n    tactor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\n    DAE.unsetFlag(tactor, `shillelagh`);\n    ChatMessage.create({content: copy_item.name + \" returns to normal\"});\n\n}",
                    "author": "E4BVikjIkVl2lL2j"
                },
                "data": {
                    "name": "Shillelagh",
                    "type": "script",
                    "scope": "global",
                    "command": "const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\n\nlet weapons = tactor.items.filter(i => i.data.type === `weapon`);\nlet weapon_content = ``;\n\nfor (let weapon of weapons) {\n    weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n}\nif (args[0] === \"on\") {\n    let content = `\n<div class=\"form-group\">\n  <label>Weapons : </label>\n  <select name=\"weapons\">\n    ${weapon_content}\n  </select>\n</div>`;\n\n    new Dialog({\n        title: \"Choose a club or quarterstaff\",\n        content,\n        buttons:\n        {\n            Ok:\n            {\n                label: `Ok`,\n                callback: (html) => {\n                    let itemId = html.find('[name=weapons]')[0].value;\n                    let weaponItem = tactor.items.get(itemId);\n                    let copy_item = duplicate(weaponItem);\n                    DAE.setFlag(tactor, `shillelagh`, {\n                        id : itemId,\n                        damage : copy_item.data.damage.parts[0][0]    \n                    });\n                    let damage = copy_item.data.damage.parts[0][0];\n                    var newdamage = damage.replace(/1d(4|6)/g,\"1d8\");\n                    copy_item.data.damage.parts[0][0] = newdamage;\n                    copy_item.data.ability = \"wis\";\n                    tactor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\n                    ChatMessage.create({content: copy_item.name + \" is empowered\"});\n                }\n            },\n            Cancel:\n            {\n                label: `Cancel`\n            }\n        }\n    }).render(true);\n}\n\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, `shillelagh`);\n    let weaponItem = tactor.items.get(flag.id);\n    let copy_item = duplicate(weaponItem);\n    copy_item.data.damage.parts[0][0] = flag.damage;\n    copy_item.data.ability = \"\";\n    tactor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\n    DAE.unsetFlag(tactor, `shillelagh`);\n    ChatMessage.create({content: copy_item.name + \" returns to normal\"});\n\n}",
                    "author": "E4BVikjIkVl2lL2j"
                },
                "options": {},
                "apps": {},
                "compendium": null
            }
        },
        "core": {},
        "midiProperties": {
            "confirmTargets": "default",
            "autoFailFriendly": false,
            "autoSaveFriendly": false,
            "critOther": false,
            "offHandWeapon": false,
            "magicdam": false,
            "magiceffect": false,
            "concentration": false,
            "noConcentrationCheck": false,
            "toggleEffect": false,
            "ignoreTotalCover": false,
            "idr": false,
            "idi": false,
            "idv": false,
            "ida": false
        },
        "midi-qol": {
            "effectActivation": false,
            "itemCondition": "",
            "reactionCondition": "",
            "otherCondition": "",
            "effectCondition": "",
            "rollAttackPerTarget": "default"
        },
        "dae": {
            "macro": {
                "name": "Shillelagh",
                "img": "icons/weapons/staves/staff-vines-green.webp",
                "type": "script",
                "scope": "global",
                "command": "",
                "author": "3Yi0HjF4PKCA4vX0",
                "ownership": {
                    "default": 3
                },
                "_id": null,
                "folder": null,
                "sort": 0,
                "flags": {},
                "_stats": {
                    "coreVersion": "12.325",
                    "systemId": "dnd5e",
                    "systemVersion": "3.2.0",
                    "createdTime": null,
                    "modifiedTime": null,
                    "lastModifiedBy": null,
                    "compendiumSource": null,
                    "duplicateSource": null
                }
            }
        },
        "dnd5e": {
            "riders": {
                "activity": [],
                "effect": []
            },
            "migratedProperties": [
                "vocal",
                "somatic",
                "material"
            ]
        }
    },
    "system": {
        "description": {
            "value": "<p><span style=\"font-family:Signika, sans-serif\"><em style=\"box-sizing:border-box;user-select:text\">You touch a wooden @UUID[Compendium.elkan5e.elkan5e-equipment.Item.Xq5GOTmI51WGTB2i]{club}, @UUID[Compendium.elkan5e.elkan5e-equipment.Item.yWjRA9RARTDSbAfU]{greatclub}, or @UUID[Compendium.elkan5e.elkan5e-equipment.Item.qpOD3sz47K9lnNgt]{quarterstaff} you are carrying. The wood is enchanted with your magical power, allowing you to wield it with ease and strike powerful creatures deadly blows.</em></span></p><p><strong>Utility Spell</strong></p><ul><li><p>Your chosen weapon now deals &amp;reference[Magicw]{magical} bludgeoning damage. You can use your &amp;reference[abilityspells]{spellcasting ability} instead of &amp;reference[Strength] for attack and damage rolls, and the weapon's damage die becomes a d8 if wielded one handed, and a d10 if wielded two-handed. The spell ends if you cast it again or if you let go of the weapon.</p></li></ul>",
            "chat": "<p><strong>Utility Spell</strong></p><ul><li><p>Your chosen weapon now deals &amp;reference[Magicw]{magical} bludgeoning damage. You can use your &amp;reference[abilityspells]{spellcasting ability} instead of &amp;reference[Strength] for attack and damage rolls, and the weapon's damage die becomes a d8 if wielded one handed, and a d10 if wielded two-handed. The spell ends if you cast it again or if you let go of the weapon.</p></li></ul>"
        },
        "source": {
            "custom": "elkan5e.com/spells/shillelagh",
            "revision": 1,
            "rules": "",
            "book": "Elkan 5e",
            "page": "",
            "license": ""
        },
        "activation": {
            "type": "bonus",
            "condition": "",
            "value": 1
        },
        "duration": {
            "value": "1",
            "units": "minute"
        },
        "target": {
            "affects": {
                "special": "",
                "type": "object",
                "count": "1",
                "choice": false
            },
            "template": {
                "type": "",
                "units": "",
                "contiguous": false
            }
        },
        "range": {
            "units": "touch",
            "special": ""
        },
        "uses": {
            "max": "",
            "recovery": [],
            "spent": 0
        },
        "ability": "",
        "level": 0,
        "school": "trs",
        "materials": {
            "value": "A wooden club, greatclub or quarterstaff",
            "consumed": false,
            "cost": 0,
            "supply": 0
        },
        "preparation": {
            "mode": "always",
            "prepared": true
        },
        "properties": [
            "vocal",
            "somatic",
            "material",
            "mgc"
        ],
        "activities": {
            "dnd5eactivity000": {
                "_id": "dnd5eactivity000",
                "type": "enchant",
                "activation": {
                    "type": "action",
                    "value": null,
                    "override": false
                },
                "consumption": {
                    "targets": [],
                    "scaling": {
                        "allowed": false,
                        "max": ""
                    },
                    "spellSlot": true
                },
                "description": {
                    "chatFlavor": ""
                },
                "duration": {
                    "units": "inst",
                    "concentration": false,
                    "override": false
                },
                "effects": [
                    {
                        "_id": "WAz2KeNm0Do9ykPj",
                        "level": {
                            "min": null,
                            "max": null
                        },
                        "riders": {
                            "effect": [],
                            "item": [],
                            "activity": []
                        }
                    }
                ],
                "range": {
                    "override": false
                },
                "target": {
                    "prompt": true,
                    "template": {
                        "contiguous": false,
                        "units": "ft"
                    },
                    "affects": {
                        "choice": false
                    },
                    "override": false
                },
                "uses": {
                    "spent": 0,
                    "max": "",
                    "recovery": []
                },
                "enchant": {
                    "identifier": ""
                },
                "restrictions": {
                    "allowMagical": true,
                    "type": "weapon",
                    "categories": [
                        "simpleM"
                    ],
                    "properties": []
                },
                "sort": 0,
                "name": "",
                "img": "",
                "appliedEffects": [
                    "WAz2KeNm0Do9ykPj"
                ]
            }
        },
        "identifier": ""
    },
    "ownership": {
        "default": 0,
        "VJURYym0JQByHBQL": 3,
        "MKYWAnkTJr0gkDqT": 3,
        "vHqSHJMdmEO6Mk2C": 3
    },
    "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dnd5e",
        "systemVersion": "4.0.4",
        "createdTime": 1726952198887,
        "modifiedTime": 1728960825254,
        "lastModifiedBy": "LhShb9ShQN3ambNF"
    },
    "_id": "FkPsaMlXfJwLngaX",
    "sort": 900000,
    "_key": "!items!FkPsaMlXfJwLngaX"
}