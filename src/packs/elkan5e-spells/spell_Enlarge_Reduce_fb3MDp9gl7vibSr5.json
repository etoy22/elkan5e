{
  "name": "Enlarge/Reduce",
  "type": "spell",
  "img": "icons/magic/control/silhouette-grow-shrink-tan.webp",
  "effects": [
    {
      "name": "Enlarge",
      "changes": [
        {
          "key": "flags.midi-qol.advantage.ability.save.str",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.advantage.skill.ath",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.skill.acr",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.skill.ste",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.skill.slt",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "system.attributes.movement.walk",
          "mode": 2,
          "value": "5",
          "priority": 20
        },
        {
          "key": "system.attributes.capacity.creature",
          "mode": 1,
          "value": "2",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.ability.save.dex",
          "mode": 5,
          "value": "1",
          "priority": 20
        }
      ],
      "transfer": false,
      "_id": "1SHg1KCgSQvbyXVw",
      "disabled": false,
      "duration": {
        "startTime": null,
        "seconds": 3600,
        "combat": null,
        "rounds": null,
        "turns": null,
        "startRound": null,
        "startTurn": null
      },
      "description": "",
      "origin": "Compendium.elkan5e.elkan5e-spells.Item.fb3MDp9gl7vibSr5",
      "statuses": [],
      "flags": {
        "dae": {
          "disableIncapacitated": false,
          "selfTarget": false,
          "selfTargetAlways": false,
          "dontApply": true,
          "stackable": "noneName",
          "showIcon": false,
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": []
        },
        "ActiveAuras": {
          "isAura": false,
          "aura": "None",
          "nameOverride": "",
          "radius": "",
          "alignment": "",
          "type": "",
          "customCheck": "",
          "ignoreSelf": false,
          "height": false,
          "hidden": false,
          "displayTemp": false,
          "hostile": false,
          "onlyOnce": false,
          "wallsBlock": "system"
        },
        "core": {
          "sourceId": "Actor.pJ1UzEiQhmmr2Lp4.Item.QAw2mSz0KBsTJfq1.ActiveEffect.DAAVZx3dfbPkU4nX"
        },
        "times-up": {
          "isPassive": false
        }
      },
      "tint": "#ffffff",
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dnd5e",
        "systemVersion": "4.0.2",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "img": "icons/magic/control/silhouette-grow-shrink-tan.webp",
      "type": "base",
      "system": {},
      "sort": 0,
      "_key": "!items.effects!fb3MDp9gl7vibSr5.1SHg1KCgSQvbyXVw"
    },
    {
      "name": "Reduce",
      "changes": [
        {
          "key": "flags.midi-qol.disadvantage.ability.save.str",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.skill.ath",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.advantage.ability.save.dex",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.advantage.skill.acr",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.advantage.skill.slt",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "flags.midi-qol.disadvantage.skill.ste",
          "mode": 5,
          "value": "1",
          "priority": 20
        },
        {
          "key": "system.attributes.capacity.creature",
          "mode": 1,
          "value": "1/2",
          "priority": 20
        },
        {
          "key": "system.attributes.movement.walk",
          "mode": 2,
          "value": "-5",
          "priority": 20
        }
      ],
      "transfer": false,
      "_id": "hCTBIqpD4gHYtMiB",
      "disabled": false,
      "duration": {
        "startTime": null,
        "seconds": 3600,
        "combat": null,
        "rounds": null,
        "turns": null,
        "startRound": null,
        "startTurn": null
      },
      "description": "",
      "origin": "Compendium.elkan5e.elkan5e-spells.Item.fb3MDp9gl7vibSr5",
      "statuses": [],
      "flags": {
        "dae": {
          "disableIncapacitated": false,
          "selfTarget": false,
          "selfTargetAlways": false,
          "dontApply": true,
          "stackable": "noneName",
          "showIcon": false,
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": []
        },
        "ActiveAuras": {
          "isAura": false,
          "aura": "None",
          "nameOverride": "",
          "radius": "",
          "alignment": "",
          "type": "",
          "customCheck": "",
          "ignoreSelf": false,
          "height": false,
          "hidden": false,
          "displayTemp": false,
          "hostile": false,
          "onlyOnce": false,
          "wallsBlock": "system"
        },
        "core": {
          "sourceId": "Actor.pJ1UzEiQhmmr2Lp4.Item.QAw2mSz0KBsTJfq1.ActiveEffect.DAAVZx3dfbPkU4nX"
        },
        "times-up": {
          "isPassive": false
        }
      },
      "tint": "#ffffff",
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dnd5e",
        "systemVersion": "4.0.2",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "img": "icons/magic/control/silhouette-grow-shrink-tan.webp",
      "type": "base",
      "system": {},
      "sort": 0,
      "_key": "!items.effects!fb3MDp9gl7vibSr5.hCTBIqpD4gHYtMiB"
    }
  ],
  "folder": "6J3i75lfD1J0xYwA",
  "flags": {
    "dynamiceffects": {
      "equipActive": true,
      "alwaysActive": false,
      "effects": [
        {
          "modSpecKey": "macro.execute",
          "value": "EnlargeReduce @target",
          "mode": "+",
          "targetSpecific": false,
          "id": 1,
          "itemId": "l3i21wVEWMHVOXyj",
          "active": true,
          "_targets": [],
          "label": "Macro Execute"
        }
      ]
    },
    "dae": {
      "activeEquipped": false,
      "alwaysActive": false,
      "macro": {
        "name": "Enlarge/Reduce",
        "img": "icons/magic/control/silhouette-grow-shrink-tan.webp",
        "type": "script",
        "scope": "global",
        "command": "",
        "author": "3Yi0HjF4PKCA4vX0",
        "ownership": {
          "default": 3
        },
        "_id": null,
        "folder": null,
        "sort": 0,
        "flags": {},
        "_stats": {
          "systemId": null,
          "systemVersion": null,
          "coreVersion": null,
          "createdTime": null,
          "modifiedTime": null,
          "lastModifiedBy": null
        }
      }
    },
    "itemacro": {
      "macro": {
        "_data": {
          "name": "Enlarge/Reduce",
          "type": "script",
          "scope": "global",
          "command": "//DAE Macro Execute, Effect Value = \"Macro Name\" @target \n\n/**\n * For each target, the GM will have to choose \n */\n\nconst lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\n\nlet target = canvas.tokens.get(lastArg.tokenId);\nlet originalSize = target.data.width;\nlet mwak = target.actor.data.data.bonuses.mwak.damage;\n\nif (args[0] === \"on\") {\n    new Dialog({\n        title: \"Enlarge or Reduce\",\n        buttons: {\n            one: {\n                label: \"Enlarge\",\n                callback: () => {\n                    let bonus = mwak + \"+ 1d4\";\n                    let enlarge = (originalSize + 1);\n                    tactor.update({ \"data.bonuses.mwak.damage\": bonus });\n                    target.update({ \"width\": enlarge, \"height\": enlarge });\n                    DAE.setFlag(tactor, 'enlageReduceSpell', {\n                        size: originalSize,\n                        ogMwak: mwak,\n                    });\n                    ChatMessage.create({ content: `${target.name} is enlarged` });\n                }\n            },\n            two: {\n                label: \"Reduce\",\n                callback: () => {\n                    let bonus = mwak + \" -1d4\";\n                    let size = originalSize;\n                    let newSize = (size > 1) ? (size - 1) : (size - 0.3);\n                    tactor.update({ \"data.bonuses.mwak.damage\": bonus });\n                    target.update({ \"width\": newSize, \"height\": newSize });\n                    DAE.setFlag(tactor, 'enlageReduceSpell', {\n                        size: originalSize,\n                        ogMwak: mwak,\n                    });\n                    ChatMessage.create({ content: `${target.name} is reduced` });\n                }\n            },\n        }\n    }).render(true);\n}\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, 'enlageReduceSpell');\n    tactor.update({ \"data.bonuses.mwak.damage\": flag.ogMwak });\n    target.update({ \"width\": flag.size, \"height\": flag.size });\n    DAE.unsetFlag(tactor, 'enlageReduceSpell');\n    ChatMessage.create({ content: `${target.name} is returned to normal size` });\n}",
          "author": "E4BVikjIkVl2lL2j"
        },
        "data": {
          "name": "Enlarge/Reduce",
          "type": "script",
          "scope": "global",
          "command": "//DAE Macro Execute, Effect Value = \"Macro Name\" @target \n\n/**\n * For each target, the GM will have to choose \n */\n\nconst lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\n\nlet target = canvas.tokens.get(lastArg.tokenId);\nlet originalSize = target.data.width;\nlet mwak = target.actor.data.data.bonuses.mwak.damage;\n\nif (args[0] === \"on\") {\n    new Dialog({\n        title: \"Enlarge or Reduce\",\n        buttons: {\n            one: {\n                label: \"Enlarge\",\n                callback: () => {\n                    let bonus = mwak + \"+ 1d4\";\n                    let enlarge = (originalSize + 1);\n                    tactor.update({ \"data.bonuses.mwak.damage\": bonus });\n                    target.update({ \"width\": enlarge, \"height\": enlarge });\n                    DAE.setFlag(tactor, 'enlageReduceSpell', {\n                        size: originalSize,\n                        ogMwak: mwak,\n                    });\n                    ChatMessage.create({ content: `${target.name} is enlarged` });\n                }\n            },\n            two: {\n                label: \"Reduce\",\n                callback: () => {\n                    let bonus = mwak + \" -1d4\";\n                    let size = originalSize;\n                    let newSize = (size > 1) ? (size - 1) : (size - 0.3);\n                    tactor.update({ \"data.bonuses.mwak.damage\": bonus });\n                    target.update({ \"width\": newSize, \"height\": newSize });\n                    DAE.setFlag(tactor, 'enlageReduceSpell', {\n                        size: originalSize,\n                        ogMwak: mwak,\n                    });\n                    ChatMessage.create({ content: `${target.name} is reduced` });\n                }\n            },\n        }\n    }).render(true);\n}\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, 'enlageReduceSpell');\n    tactor.update({ \"data.bonuses.mwak.damage\": flag.ogMwak });\n    target.update({ \"width\": flag.size, \"height\": flag.size });\n    DAE.unsetFlag(tactor, 'enlageReduceSpell');\n    ChatMessage.create({ content: `${target.name} is returned to normal size` });\n}",
          "author": "E4BVikjIkVl2lL2j"
        },
        "options": {},
        "apps": {},
        "compendium": null
      }
    },
    "midi-qol": {
      "onUseMacroName": "",
      "effectActivation": false,
      "itemCondition": "",
      "reactionCondition": "",
      "otherCondition": "",
      "effectCondition": "",
      "rollAttackPerTarget": "default"
    },
    "core": {},
    "midiProperties": {
      "nodam": false,
      "fulldam": false,
      "halfdam": false,
      "rollOther": false,
      "critOther": false,
      "magicdam": false,
      "magiceffect": false,
      "concentration": false,
      "toggleEffect": false,
      "autoFailFriendly": true,
      "autoSaveFriendly": false,
      "offHandWeapon": false,
      "ignoreTotalCover": false,
      "noConcentrationCheck": false,
      "confirmTargets": "default",
      "idr": false,
      "idi": false,
      "idv": false,
      "ida": false
    },
    "dnd5e": {
      "riders": {
        "activity": [],
        "effect": []
      },
      "migratedProperties": [
        "vocal",
        "somatic",
        "material",
        "concentration"
      ]
    }
  },
  "system": {
    "description": {
      "value": "<p><em>Holding a small amount of iron powder, you make either an expanding or compressing motion with your hands in the direction of your chosen creature. The creature and their apparel change size rapidly, their voice deepening or getting higher pitched as they do.</em></p><p>If the target is a creature, everything it is wearing and carrying changes size with it. Any item dropped by an affected creature returns to normal size at once.</p><p><strong>Constitution Save</strong></p><p>A willing creature automatically fails this saving throw as normal.</p><p><strong>Failure:</strong> The targets gain one of the following effects:</p><ul><li><p><strong>Enlarge:</strong> The target's size increases by one size category. If there isn't enough room for the target to double their size, the creature or object attains the maximum possible size in the space available. The target gains advantage on strength saves and strength skill checks but suffers disadvantage on dexterity saves and dexterity skill checks. If the target is a creature their speeds increase by 5 ft. and their carrying capacity is doubled.</p></li><li><p><strong>Reduce:</strong> The target's size decreases by one size category. The target gains advantage on dexterity saves and dexterity skill checks but suffers disadvantage on strength saves and strength skill checks. If the target is a creature their speeds decrease by 5 ft. and their carrying capacity is halved.</p></li></ul><p></p><p><strong>Upcasting</strong>: <span style=\"font-family:Signika, sans-serif\">Target one additional creature for each spell level above 2nd.</span></p>",
      "chat": "<p>If the target is a creature, everything it is wearing and carrying changes size with it. Any item dropped by an affected creature returns to normal size at once.</p><p><strong>Constitution Save</strong></p><p>A willing creature automatically fails this saving throw as normal.</p><p><strong>Failure:</strong> The targets gain one of the following effects:</p><ul><li><p><strong>Enlarge:</strong> The target's size increases by one size category. If there isn't enough room for the target to double their size, the creature or object attains the maximum possible size in the space available. The target gains advantage on strength saves and strength skill checks but suffers disadvantage on dexterity saves and dexterity skill checks. If the target is a creature their speeds increase by 5 ft. and their carrying capacity is doubled.</p></li><li><p><strong>Reduce:</strong> The target's size decreases by one size category. The target gains advantage on dexterity saves and dexterity skill checks but suffers disadvantage on strength saves and strength skill checks. If the target is a creature their speeds decrease by 5 ft. and their carrying capacity is halved.</p></li></ul><p></p><p><strong>Upcasting</strong>: <span style=\"font-family:Signika, sans-serif\">Target one additional creature for each spell level above 2nd.</span></p>"
    },
    "source": {
      "custom": "elkan5e.com/spells/enlarge%2Freduce",
      "revision": 1,
      "rules": "",
      "book": "",
      "page": "",
      "license": ""
    },
    "activation": {
      "type": "action",
      "condition": "",
      "value": 1
    },
    "duration": {
      "value": "1",
      "units": "hour"
    },
    "target": {
      "affects": {
        "type": "creatureOrObject",
        "count": "1",
        "choice": false,
        "special": ""
      },
      "template": {
        "units": "",
        "contiguous": false,
        "type": ""
      }
    },
    "range": {
      "value": "30",
      "units": "ft",
      "special": ""
    },
    "uses": {
      "max": "",
      "recovery": [],
      "spent": 0
    },
    "ability": "",
    "level": 2,
    "school": "trs",
    "materials": {
      "value": "A pinch of powdered iron",
      "consumed": false,
      "cost": 0,
      "supply": 0
    },
    "preparation": {
      "mode": "prepared",
      "prepared": true
    },
    "properties": [
      "vocal",
      "somatic",
      "material",
      "concentration",
      "mgc"
    ],
    "activities": {
      "dnd5eactivity000": {
        "_id": "dnd5eactivity000",
        "type": "save",
        "activation": {
          "type": "action",
          "value": null,
          "override": false
        },
        "consumption": {
          "targets": [],
          "scaling": {
            "allowed": false,
            "max": ""
          },
          "spellSlot": true
        },
        "description": {
          "chatFlavor": ""
        },
        "duration": {
          "units": "inst",
          "concentration": false,
          "override": false
        },
        "effects": [
          {
            "_id": "1SHg1KCgSQvbyXVw",
            "onSave": false
          }
        ],
        "range": {
          "override": false
        },
        "target": {
          "prompt": true,
          "template": {
            "contiguous": false,
            "units": "ft"
          },
          "affects": {
            "choice": false
          },
          "override": false
        },
        "uses": {
          "spent": 0,
          "max": "",
          "recovery": []
        },
        "damage": {
          "onSave": "none",
          "parts": []
        },
        "save": {
          "ability": "con",
          "dc": {
            "calculation": "spellcasting",
            "formula": ""
          }
        },
        "sort": 0,
        "name": "Save (Enlarge)",
        "img": "",
        "appliedEffects": [
          "1SHg1KCgSQvbyXVw"
        ]
      },
      "bSof9ywHy23AsoJQ": {
        "type": "save",
        "activation": {
          "type": "action",
          "value": null,
          "override": false
        },
        "consumption": {
          "targets": [],
          "scaling": {
            "allowed": false,
            "max": ""
          },
          "spellSlot": true
        },
        "description": {
          "chatFlavor": ""
        },
        "duration": {
          "units": "inst",
          "concentration": false,
          "override": false
        },
        "effects": [
          {
            "_id": "hCTBIqpD4gHYtMiB",
            "onSave": false
          }
        ],
        "range": {
          "override": false
        },
        "target": {
          "prompt": true,
          "template": {
            "contiguous": false,
            "units": "ft"
          },
          "affects": {
            "choice": false
          },
          "override": false
        },
        "uses": {
          "spent": 0,
          "max": "",
          "recovery": []
        },
        "damage": {
          "onSave": "none",
          "parts": []
        },
        "save": {
          "ability": "con",
          "dc": {
            "calculation": "spellcasting",
            "formula": ""
          }
        },
        "sort": 0,
        "name": "Save (Reduce)",
        "_id": "bSof9ywHy23AsoJQ",
        "img": "",
        "appliedEffects": [
          "1SHg1KCgSQvbyXVw",
          "hCTBIqpD4gHYtMiB"
        ]
      }
    },
    "identifier": ""
  },
  "ownership": {
    "default": 0,
    "VJURYym0JQByHBQL": 3,
    "MKYWAnkTJr0gkDqT": 3,
    "vHqSHJMdmEO6Mk2C": 3
  },
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "12.331",
    "systemId": "dnd5e",
    "systemVersion": "4.0.3",
    "createdTime": 1726952203568,
    "modifiedTime": 1730776812084,
    "lastModifiedBy": "LhShb9ShQN3ambNF"
  },
  "_id": "fb3MDp9gl7vibSr5",
  "sort": 5800000,
  "_key": "!items!fb3MDp9gl7vibSr5"
}
