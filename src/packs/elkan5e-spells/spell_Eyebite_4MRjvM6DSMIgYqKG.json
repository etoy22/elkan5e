{
    "name": "Eyebite",
    "type": "spell",
    "img": "icons/magic/perception/eye-ringed-glow-angry-teal.webp",
    "effects": [
        {
            "changes": [],
            "transfer": false,
            "_id": "omqS8IbthU23gRo9",
            "disabled": false,
            "duration": {
                "startTime": null,
                "seconds": 60,
                "combat": null,
                "rounds": null,
                "turns": null,
                "startRound": null,
                "startTurn": null
            },
            "origin": null,
            "tint": "#ffffff",
            "flags": {
                "dae": {
                    "selfTarget": false,
                    "selfTargetAlways": false,
                    "stackable": "none",
                    "durationExpression": "",
                    "macroRepeat": "none",
                    "specialDuration": [
                        "isDamaged"
                    ],
                    "enableCondition": "",
                    "disableCondition": "",
                    "disableIncapacitated": false,
                    "dontApply": false,
                    "showIcon": false
                },
                "core": {
                    "overlay": false
                },
                "ActiveAuras": {
                    "isAura": false,
                    "aura": "None",
                    "radius": "",
                    "alignment": "",
                    "type": "",
                    "ignoreSelf": false,
                    "height": false,
                    "hidden": false,
                    "displayTemp": false,
                    "hostile": false,
                    "onlyOnce": false,
                    "nameOverride": "",
                    "customCheck": "",
                    "wallsBlock": "system"
                }
            },
            "name": "Asleep",
            "description": "",
            "statuses": [
                "unconscious"
            ],
            "_stats": {
                "compendiumSource": null,
                "duplicateSource": null,
                "coreVersion": "12.331",
                "systemId": "dnd5e",
                "systemVersion": "4.0.2",
                "createdTime": null,
                "modifiedTime": 1729562486373,
                "lastModifiedBy": "YxlXl9sauSuWxHdZ"
            },
            "img": "icons/magic/perception/eye-ringed-glow-angry-teal.webp",
            "type": "base",
            "system": {},
            "sort": 0,
            "_key": "!items.effects!4MRjvM6DSMIgYqKG.omqS8IbthU23gRo9"
        },
        {
            "changes": [],
            "transfer": false,
            "disabled": false,
            "duration": {
                "startTime": null,
                "seconds": 60,
                "combat": null,
                "rounds": null,
                "turns": null,
                "startRound": null,
                "startTurn": null
            },
            "origin": null,
            "tint": "#ffffff",
            "flags": {
                "dae": {
                    "selfTarget": false,
                    "selfTargetAlways": false,
                    "stackable": "none",
                    "durationExpression": "",
                    "macroRepeat": "none",
                    "specialDuration": [],
                    "enableCondition": "",
                    "disableCondition": "",
                    "disableIncapacitated": false,
                    "dontApply": false,
                    "showIcon": false
                },
                "core": {
                    "overlay": false
                },
                "ActiveAuras": {
                    "isAura": false,
                    "aura": "None",
                    "radius": "",
                    "alignment": "",
                    "type": "",
                    "ignoreSelf": false,
                    "height": false,
                    "hidden": false,
                    "displayTemp": false,
                    "hostile": false,
                    "onlyOnce": false,
                    "nameOverride": "",
                    "customCheck": "",
                    "wallsBlock": "system"
                }
            },
            "name": "Panicked",
            "description": "",
            "statuses": [
                "frightened"
            ],
            "_stats": {
                "compendiumSource": null,
                "duplicateSource": null,
                "coreVersion": "12.331",
                "systemId": "dnd5e",
                "systemVersion": "4.0.4",
                "createdTime": 1729562456125,
                "modifiedTime": 1729562646410,
                "lastModifiedBy": "YxlXl9sauSuWxHdZ"
            },
            "img": "icons/magic/perception/eye-ringed-glow-angry-teal.webp",
            "type": "base",
            "system": {},
            "sort": 0,
            "_id": "bOs0G0NkPTmlvdSS",
            "_key": "!items.effects!4MRjvM6DSMIgYqKG.bOs0G0NkPTmlvdSS"
        },
        {
            "changes": [
                {
                    "key": "flags.midi-qol.OverTime",
                    "mode": 2,
                    "value": "turn=end,\nsaveAbility=wis,\nsaveDC=@attributes.spelldc,\nsaveMagic=true,\nlabel=Sickened (Eye Bite)",
                    "priority": 20
                },
                {
                    "key": "flags.midi-qol.disadvantage.attack.all",
                    "mode": 2,
                    "value": "1",
                    "priority": 20
                },
                {
                    "key": "flags.midi-qol.disadvantage.ability.all",
                    "mode": 2,
                    "value": "1",
                    "priority": 20
                }
            ],
            "transfer": false,
            "disabled": false,
            "duration": {
                "startTime": null,
                "seconds": 60,
                "combat": null,
                "rounds": null,
                "turns": null,
                "startRound": null,
                "startTurn": null
            },
            "origin": null,
            "tint": "#ffffff",
            "flags": {
                "dae": {
                    "selfTarget": false,
                    "selfTargetAlways": false,
                    "stackable": "none",
                    "durationExpression": "",
                    "macroRepeat": "none",
                    "specialDuration": [],
                    "enableCondition": "",
                    "disableCondition": "",
                    "disableIncapacitated": false,
                    "dontApply": false,
                    "showIcon": false
                },
                "core": {
                    "overlay": false
                },
                "ActiveAuras": {
                    "isAura": false,
                    "aura": "None",
                    "radius": "",
                    "alignment": "",
                    "type": "",
                    "ignoreSelf": false,
                    "height": false,
                    "hidden": false,
                    "displayTemp": false,
                    "hostile": false,
                    "onlyOnce": false,
                    "nameOverride": "",
                    "customCheck": "",
                    "wallsBlock": "system"
                }
            },
            "name": "Sickened",
            "description": "",
            "statuses": [],
            "_stats": {
                "compendiumSource": null,
                "duplicateSource": null,
                "coreVersion": "12.331",
                "systemId": "dnd5e",
                "systemVersion": "4.0.4",
                "createdTime": 1729562457567,
                "modifiedTime": 1729563193047,
                "lastModifiedBy": "YxlXl9sauSuWxHdZ"
            },
            "img": "icons/magic/perception/eye-ringed-glow-angry-teal.webp",
            "type": "base",
            "system": {},
            "sort": 0,
            "_id": "OrBuAPTNoPzxfAba",
            "_key": "!items.effects!4MRjvM6DSMIgYqKG.OrBuAPTNoPzxfAba"
        }
    ],
    "folder": "sDaRY0H81UTha6hq",
    "flags": {
        "dynamiceffects": {
            "equipActive": false,
            "alwaysActive": false,
            "effects": [
                {
                    "modSpecKey": "macro.execute",
                    "value": "Eyebite @target @attributes.spelldc ",
                    "mode": "+",
                    "targetSpecific": false,
                    "id": 1,
                    "itemId": "XcK0JcIi8L5qpnzF",
                    "active": true,
                    "_targets": [],
                    "label": "Macro Execute"
                }
            ]
        },
        "itemacro": {
            "macro": {
                "_data": {
                    "name": "Eyebite",
                    "type": "script",
                    "scope": "global",
                    "command": "const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\nconst DAEItem = lastArg.efData.flags.dae.itemData\nconst saveData = DAEItem.data.save\n\nlet folder = await game.packs.get(\"Dynamic-Effects-SRD.DAE SRD Macros\").getContent()\nlet CUBControl = folder.find(i => i.data.name === \"CUB Condition\")\n\n/**\n * Dialog appears on players screen, CondtionControll callback execute on GM end \n */\n\nfunction EyebiteDialog() {\n    new Dialog({\n        title: \"Eyebite options\",\n        content: \"<p>Target a token and select the effect</p>\",\n        buttons: {\n            one: {\n                label: \"Asleep\",\n                callback: async () => {\n                    for (let target of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[saveData.ability]} DC${saveData.dc} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(saveData.ability, { flavor })).total;\n                        if (saveRoll < saveData.ability) {\n                            ChatMessage.create({ content: `${target.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Unconscious\", target);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${target.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n            two: {\n                label: \"Panicked\",\n                callback: async () => {\n                    for (let target of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[saveData.ability]} DC${saveData.dc} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(saveData.ability, { flavor })).total;\n                        if (saveRoll < saveData.ability) {\n                            ChatMessage.create({ content: `${target.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Frightened\", target);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${target.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n            three: {\n                label: \"Sickened\",\n                callback: async () => {\n                    for (let target of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[saveData.ability]} DC${saveData.dc} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(saveData.ability, { flavor })).total;\n                        if (saveRoll < saveData.ability) {\n                            ChatMessage.create({ content: `${target.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Poisoned\", target);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${target.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n        }\n    }).render(true);\n}\n\nif (args[0] === \"on\") {\n    EyebiteDialog();\n    ChatMessage.create({ content: `${target.name} is blessed with Eyebite` });\n\n}\n\n//Cleanup hooks and flags.\nif (args[0] === \"each\") {\n    EyebiteDialog();\n}",
                    "author": "E4BVikjIkVl2lL2j"
                },
                "data": {
                    "name": "Eyebite",
                    "type": "script",
                    "scope": "global",
                    "command": "// DAE macro, args : @attributes.spelldc\nif(!game.modules.get(\"advanced-macros\")?.active) {ui.notifications.error(\"Please enable the Advanced Macros module\") ;return;}\nif(!game.modules.get(\"combat-utility-belt\")?.active) {ui.notifications.error(\"Please enable the CUB module\"); return;}\n\nconst lastArg = args[args.length - 1];\nconst DC = args[1]\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\nconst DAEItem = lastArg.efData.flags.dae.itemData\nlet target = canvas.tokens.get(lastArg.tokenId)\n\nlet folder = await game.packs.get(\"Dynamic-Effects-SRD.DAE SRD Macros\").getContent()\nlet CUBControl = folder.find(i => i.data.name === \"CUB Condition\")\n\n/**\n * Dialog appears on players screen, CondtionControll callback execute on GM end \n */\n\nfunction EyebiteDialog() {\n    new Dialog({\n        title: \"Eyebite options\",\n        content: \"<p>Target a token and select the effect</p>\",\n        buttons: {\n            one: {\n                label: \"Asleep\",\n                callback: async () => {\n                    for (let t of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[\"wis\"]} DC${DC} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(\"wis\", { flavor })).total;\n                        if (saveRoll < DC) {\n                            ChatMessage.create({ content: `${t.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Unconscious\", t);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${t.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n            two: {\n                label: \"Panicked\",\n                callback: async () => {\n                    for (let t of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[\"wis\"]} DC${DC} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(\"wis\", { flavor })).total;\n                        if (saveRoll < DC) {\n                            ChatMessage.create({ content: `${t.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Frightened\", t);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${t.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n            three: {\n                label: \"Sickened\",\n                callback: async () => {\n                    for (let t of game.user.targets) {\n                        const flavor = `${CONFIG.DND5E.abilities[\"wis\"]} DC${DC} ${DAEItem?.name || \"\"}`;\n                        let saveRoll = (await tactor.rollAbilitySave(\"wis\", { flavor })).total;\n                        if (saveRoll < DC) {\n                            ChatMessage.create({ content: `${t.name} failed the save with a ${saveRoll}` });\n                            CUBControl.execute(\"apply\", \"Poisoned\", t);\n                        }\n                        else {\n                            ChatMessage.create({ content: `${t.name} passed the save with a ${saveRoll}` });\n                        }\n                    }\n                }\n            },\n        }\n    }).render(true);\n}\n\nif (args[0] === \"on\") {\n    EyebiteDialog();\n    ChatMessage.create({ content: `${target.name} is blessed with Eyebite` });\n\n}\n\n//Cleanup hooks and flags.\nif (args[0] === \"each\") {\n    EyebiteDialog();\n}",
                    "author": "zrPR3wueYsESSBR3",
                    "_id": null,
                    "img": "icons/svg/dice-target.svg",
                    "folder": null,
                    "sort": 0,
                    "permission": {
                        "default": 0
                    },
                    "flags": {}
                },
                "options": {},
                "apps": {},
                "compendium": null
            }
        },
        "core": {},
        "midiProperties": {
            "confirmTargets": "default",
            "autoFailFriendly": false,
            "autoSaveFriendly": false,
            "critOther": false,
            "offHandWeapon": false,
            "magicdam": false,
            "magiceffect": false,
            "concentration": false,
            "noConcentrationCheck": false,
            "toggleEffect": false,
            "ignoreTotalCover": false,
            "idr": false,
            "idi": false,
            "idv": false,
            "ida": false
        },
        "midi-qol": {
            "rollAttackPerTarget": "default",
            "effectActivation": false,
            "itemCondition": "",
            "effectCondition": "",
            "reactionCondition": ""
        },
        "dae": {
            "macro": {
                "name": "Eyebite",
                "img": "icons/magic/perception/eye-ringed-glow-angry-teal.webp",
                "type": "script",
                "scope": "global",
                "command": "",
                "author": "3Yi0HjF4PKCA4vX0",
                "ownership": {
                    "default": 3
                },
                "_id": null,
                "folder": null,
                "sort": 0,
                "flags": {},
                "_stats": {
                    "systemId": null,
                    "systemVersion": null,
                    "coreVersion": null,
                    "createdTime": null,
                    "modifiedTime": null,
                    "lastModifiedBy": null
                }
            }
        },
        "dnd5e": {
            "riders": {
                "activity": [],
                "effect": []
            },
            "migratedProperties": [
                "vocal",
                "somatic",
                "concentration"
            ]
        }
    },
    "system": {
        "description": {
            "value": "<p>For the spell’s Duration, your eyes become an inky void imbued with dread power. One creature of your choice within 60 feet of you that you can see must succeed on a Wisdom saving throw or be affected by one of the following Effects of your choice for the Duration. On each of your turns until the spell ends, you can use your action to target another creature but can’t target a creature again if it has succeeded on a saving throw against this casting of eyebite.</p>\n<ul>\n<li><strong>Asleep</strong>. The target falls Unconscious. It wakes up if it takes any damage or if another creature uses its action to shake the sleeper awake.</li>\n<li><strong>Panicked</strong>. The target is Frightened of you. On each of its turns, the frigh⁠tened creature must take the Dash action and move away from you by the safest and shortest available route, unless there is nowhere to move. If the target moves to a place at least 60 feet away from you where it can no longer see you, this effect ends.</li>\n<li><strong>Sickened</strong>. The target has disadvantage on Attack rolls and Ability Checks. At the end of each of its turns, it can make another Wisdom saving throw. If it succeeds, the effect ends</li>\n</ul>",
            "chat": ""
        },
        "source": {
            "custom": "Elkan 5e",
            "revision": 1,
            "rules": "",
            "book": "",
            "page": "",
            "license": ""
        },
        "activation": {
            "type": "action",
            "condition": "",
            "value": 1
        },
        "duration": {
            "value": "1",
            "units": "minute"
        },
        "target": {
            "affects": {
                "type": "self",
                "choice": false,
                "special": ""
            },
            "template": {
                "units": "",
                "contiguous": false,
                "type": ""
            }
        },
        "range": {
            "units": "self",
            "special": ""
        },
        "uses": {
            "max": "",
            "recovery": [],
            "spent": 0
        },
        "ability": "",
        "level": 6,
        "school": "enc",
        "materials": {
            "value": "",
            "consumed": false,
            "cost": 0,
            "supply": 0
        },
        "preparation": {
            "mode": "prepared",
            "prepared": true
        },
        "properties": [
            "vocal",
            "somatic",
            "concentration"
        ],
        "activities": {
            "LJf8OOC4b4IrpqbJ": {
                "type": "save",
                "activation": {
                    "type": "action",
                    "value": null,
                    "override": false
                },
                "consumption": {
                    "targets": [],
                    "scaling": {
                        "allowed": false,
                        "max": ""
                    },
                    "spellSlot": true
                },
                "description": {
                    "chatFlavor": ""
                },
                "duration": {
                    "units": "inst",
                    "concentration": false,
                    "override": false
                },
                "effects": [
                    {
                        "_id": "omqS8IbthU23gRo9",
                        "onSave": false
                    }
                ],
                "range": {
                    "override": false
                },
                "target": {
                    "prompt": true,
                    "template": {
                        "contiguous": false,
                        "units": "ft"
                    },
                    "affects": {
                        "choice": false
                    },
                    "override": false
                },
                "damage": {
                    "onSave": "none",
                    "parts": []
                },
                "save": {
                    "ability": "wis",
                    "dc": {
                        "calculation": "spellcasting",
                        "formula": ""
                    }
                },
                "uses": {
                    "spent": 0,
                    "recovery": [],
                    "max": ""
                },
                "sort": 0,
                "_id": "LJf8OOC4b4IrpqbJ",
                "name": "Save (Asleep)",
                "img": "",
                "appliedEffects": [
                    "omqS8IbthU23gRo9"
                ],
                "effectConditionText": "!target.traits.ci.value.has('unconscious')"
            },
            "JQ3s63ExGBT5q9H2": {
                "type": "save",
                "activation": {
                    "type": "action",
                    "value": null,
                    "override": false
                },
                "consumption": {
                    "targets": [],
                    "scaling": {
                        "allowed": false,
                        "max": ""
                    },
                    "spellSlot": true
                },
                "description": {
                    "chatFlavor": ""
                },
                "duration": {
                    "units": "inst",
                    "concentration": false,
                    "override": false
                },
                "effects": [
                    {
                        "_id": "bOs0G0NkPTmlvdSS",
                        "onSave": false
                    }
                ],
                "range": {
                    "override": false
                },
                "target": {
                    "prompt": true,
                    "template": {
                        "contiguous": false,
                        "units": "ft"
                    },
                    "affects": {
                        "choice": false
                    },
                    "override": false
                },
                "damage": {
                    "onSave": "none",
                    "parts": []
                },
                "save": {
                    "ability": "wis",
                    "dc": {
                        "calculation": "spellcasting",
                        "formula": ""
                    }
                },
                "uses": {
                    "spent": 0,
                    "recovery": [],
                    "max": ""
                },
                "sort": 0,
                "name": "Save (Panicked)",
                "useConditionText": "",
                "forceDialog": false,
                "effectConditionText": "!target.traits.ci.value.has('frightened')",
                "_id": "JQ3s63ExGBT5q9H2",
                "img": "",
                "appliedEffects": [
                    "bOs0G0NkPTmlvdSS"
                ]
            },
            "YuG4HL2aoVBZEtrN": {
                "type": "save",
                "activation": {
                    "type": "action",
                    "value": null,
                    "override": false
                },
                "consumption": {
                    "targets": [],
                    "scaling": {
                        "allowed": false,
                        "max": ""
                    },
                    "spellSlot": true
                },
                "description": {
                    "chatFlavor": ""
                },
                "duration": {
                    "units": "inst",
                    "concentration": false,
                    "override": false
                },
                "effects": [
                    {
                        "_id": "OrBuAPTNoPzxfAba",
                        "onSave": false
                    }
                ],
                "range": {
                    "override": false
                },
                "target": {
                    "prompt": true,
                    "template": {
                        "contiguous": false,
                        "units": "ft"
                    },
                    "affects": {
                        "choice": false
                    },
                    "override": false
                },
                "damage": {
                    "onSave": "none",
                    "parts": []
                },
                "save": {
                    "ability": "wis",
                    "dc": {
                        "calculation": "spellcasting",
                        "formula": ""
                    }
                },
                "uses": {
                    "spent": 0,
                    "recovery": [],
                    "max": ""
                },
                "sort": 0,
                "name": "Save (Sickened)",
                "useConditionText": "",
                "forceDialog": false,
                "effectConditionText": "!target.traits.ci.value.has('frightened')",
                "_id": "YuG4HL2aoVBZEtrN",
                "img": "",
                "appliedEffects": [
                    "OrBuAPTNoPzxfAba"
                ]
            }
        },
        "identifier": ""
    },
    "ownership": {
        "default": 0,
        "VJURYym0JQByHBQL": 3,
        "MKYWAnkTJr0gkDqT": 3,
        "vHqSHJMdmEO6Mk2C": 3
    },
    "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dnd5e",
        "systemVersion": "4.0.4",
        "createdTime": 1726952196687,
        "modifiedTime": 1729563200609,
        "lastModifiedBy": "YxlXl9sauSuWxHdZ"
    },
    "_id": "4MRjvM6DSMIgYqKG",
    "sort": 500000,
    "_key": "!items!4MRjvM6DSMIgYqKG"
}